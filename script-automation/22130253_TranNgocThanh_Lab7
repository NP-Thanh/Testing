{
  "configuration": {
    "device": {
      "orientation": "landscape",
      "deviceName": "Desktop"
    }
  },
  "type": "clickpath",
  "version": "1.0",
  "events": [
    // 1. Điều hướng đến trang Đăng nhập
    {
      "description": "Navigate to login page",
      "wait": {
        "waitFor": "page_complete"
      },
      "target": {},
      "type": "navigate",
      "url": "http://localhost:8080/web/login"
    },
    {
      "description": "type ${email}",
      "wait": {
        "waitFor": "page_complete"
      },
      "target": {
        "locators": [
          {
            "type": "css",
            "value": "#email"
          }
        ]
      },
      "type": "keystrokes",
      "textValue": "${email}",
      "simulateBlurEvent": true
    },
    {
      "description": "type ${password}",
      "wait": {
        "waitFor": "page_complete"
      },
      "target": {
        "locators": [
          {
            "type": "css",
            "value": "#password"
          }
        ]
      },
      "type": "keystrokes",
      "textValue": "${password}",
      "simulateBlurEvent": true,
      "masked": true
    },
    {
      "description": "click Đăng nhập",
      "wait": {
        "waitFor": "page_complete"
      },
      "target": {
        "locators": [
          {
            "type": "dom",
            "value": "document.evaluate('//input[@value=\\'Đăng nhập\\']', document, null, XPathResult.ANY_TYPE, null).iterateNext()"
          }
        ]
      },
      "type": "click",
      "button": 0
    },
    {
      "description": "Verify result: Check URL for SUCCESS or element text for FAILURE using expected_result.",
      "wait": {
        "waitFor": "page_complete"
      },
      "target": {},
      "type": "runScript",
      "script": "var expectedResult = '${expected_result}'; \n\n// Kịch bản THÀNH CÔNG: Kiểm tra URL không còn là /login \nif (expectedResult.includes('chuyển hướng đến trang chủ') || expectedResult.includes('SUCCESS')) { \n  return !window.location.href.includes('/login'); \n} \n\n// Kịch bản THẤT BẠI: Kiểm tra nội dung lỗi \n// Kiểm tra nội dung lỗi có tồn tại trong body của trang hay không\nif (document.body.innerText.includes(expectedResult)) {\n    return true;\n} \n\n// Nếu không thỏa mãn cả SUCCESS lẫn FAILURE TEXT, coi là thất bại \nreturn false;",
      "expectedResult": true 
    }
  ]
}
